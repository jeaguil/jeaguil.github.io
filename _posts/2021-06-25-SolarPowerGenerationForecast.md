---
layout: post
title: "Solar Power Generation Forecast - Predictive data analysis"
author: "Jesus Aguilera"
tags: [sample]
image: solar-farm.jpg
work-interval: June 2021 - December 2021
intro: A solar energy forecasting system that will predict the power generated by a collection of solar power plant.
---

<style scoped>
table {
  font-size: 0.825em;
}
</style>

<!-- A solar energy forecasting system that will predict the power generated by a collection of solar power plant
farms to improve the supply, demand, and prices of a volatile business model. Using a small set of weather
variables, the forecasting system is able to quantify the uncertain future. -->

Code for this project can be found [<span style="color:blue">here.</span>](https://github.com/jeaguil/svfa){:target="_blank"}

### Introduction

__Abstract - The solar energy industry has been going through a significant modernization process and the supply of renewable energy has been unpredictable in the past decade. The business behind the solar energy industry has been greatly challenged along with the supply and demand energy infrastructure. The idea is to predict the power generated by a solar power plant farm to improve supply, demand, and prices of a volatile business model to overall improve business efficiency.
The key idea is to provide a solar energy forecasting system for a solar power plant farm using the fundamentals of data mining. Given a small set of weather variable conditions from the European Centre for Medium-range Weather Forecast (ECMWF), the goal is to predict the generated power from a powerplant 24-hours later and quantify the uncertain future.__

Exact Problem - In today's energy infrastructure, the energy prices have been becoming very unpredictable  and business models have been trying to modernize the current situation in an attempt to solve a key aspect of the energy industry. The idea is to make a decision-making model to quantify the solar power output of a solar farm to predict the uncertain future. Under certain weather conditions, the solar power plant farm needs to perform to a certain expectation. This will help better understand and quantify the uncertainties of the energy industry.
The key challenge in constructing a decision-making process is trying to understand how the power output of a solar power plant is affected under different weather conditions. Especially when the model needs to take into account the number of solar power plants in a solar farm and the general size. A probabilistic forecast can also take various forms, e.g., from handling the introductory data to feed the model to choosing the most optimal regression classifier. The forecasting combination of multiple classifiers can also be a challenge. How should one combine multiple probabilistic forecasts to better generate one big one and what are the many combinations. This is the general problem in constructing a solar power generation forecasting system.

### Implemented Methods

__Dataset splitting__ - Using the provided dataset, I split into two different sets for training and testing. Since the dataset consisted of measurements at hour intervals between 2012 and 2014, the training dataset is from 2012/04/01 01:00 to 2013/07/01 00:00. The testing dataset is from 2013/07/01 01:00 to 2014/07/01 00:00.

__Feature selection__ - Which features (weather variables) are the most important in a predictive model? In this section, I discuss my general approach to reducing the number of attributes in the training dataset. I used the provided twelve weather forecast variables from the ECMWF dataset to find a correlation between their individual values and the power output several hours later. I then used the correlation coefficients from the correlation matrix to scale the weather variables by some factor based on the true effectiveness to the power output. This ensured that the model takes into account the weather variables that are most important in quantifiable regression. If the correlation coefficient of a weather variable is negative, then the ensemble classifier decreases the variable by some factor since it does not provide a great impact to the power output. Relative humidity measured in percentage proved to be the most negatively correlated to the power output 24 hours later. Second was the surface thermal radiation down measurement. On the other hand, 2-meter temperature measured in kelvin proved the most positively correlated while 10-metre wind component was the second positively correlated. Using the correlation coefficients of these weather variables, the training of the model took these coefficients to scale upward or downward for the model.

__Data Preprocessing__ - An important step in data mining for producing a probabilistic model. Taking the raw data from the training dataset and transforming it into a format that better fits the model that solves the general solution. Each weather variable in the training dataset was standardized to remove the mean and scaled variance. This was done with Eq. (1) where u is the mean of the training samples, X is the record in the dataset consisting of all weather variables and the power output at that measured hour, and s is the standard deviation of the training samples.

(1)     Standardization = (X-u)s

Each standard score was computed for each record in the dataset and all weather variables were normalized for a better format.

__Model Selection__ - Since there were over 59,000 records in the data distributed based on three solar power farms, only a few features were considered important given the variable correlations discussed before. At first, I decided to design a probabilistic linear model. A Lasso linear model was considered. This is because the Lasso model is known to perform well with a large dataset and only a few features are considered to be important. After evaluating the performance of the Lasso model, I decided to change to an ensemble model. A random forest regressor was implemented instead. This improved the predictive accuracy during training and overall controlled overfitting.

__Generalization ability__ - To evaluate the performance of the random forest regressor, I implemented cross validation with 5-fold. This ensured a more accurate probabilistic model by finding the most optimal hyperparameters for the random forest regressor. With each set of hyperparameters, I performed cross validation on the retrained model using the training data. The retrained model performed optimally on the testing dataset.

### Evaluation Results

![Evaluation Methodology](assets/img/evaluation-methodology.png)
Figure 1: Evaluation Methodology

__Verifying everything works as expected__ - In order to verify whether the testing approach performed correctly on the testing dataset, I implemented the methodology in figure 1. This helped learn the parameters for the prediction function and evaluate the performance of the model on the testing dataset. This is the typical cross validation workflow in training the optimal model for the solar power forecast.

__Experimental Results__ - Table 1 shows the experimental results of the probabilistic forecasting model approach. This shows the mean absolute error and root mean square error using the predicted power 24 hours later and the actual power. These measurements show the paired observations for predicted values.

Table 1: Model Evaluation results

Zone ID | 1 | 2 | 3 | Overall
--- | --- | --- | --- | ---
Mean Absolute Error | 0.05726 | 0.0635 | 0.0645 | 0.0617
Root Mean Squared Error | 0.1157 | 0.1230 | 0.1249 | 0.1212
